<h2 class="govuk-heading-m govuk-!-margin-top-9">3DS Flex credentials</h2>

<p class="govuk-body">Worldpay’s 3DS Flex improves how 3DS works and will also enable 3DS2 when required. There’s an additional fee to Worldpay to use 3DS Flex. <a class="govuk-link" href="https://www.payments.service.gov.uk/3d-secure-2/">Find out more about 3DS2 and 3DS Flex</a>.</p>

<p class="govuk-body">If you have set up 3DS Flex on your Worldpay account, you need to enter the following details to turn 3DS Flex on. You’ll find these details in your <a class="govuk-link" href="https://secure.worldpay.com/sso/public/auth/login.html">Worldpay account</a>.</p>

{{ govukWarningText({
  text: "If your credentials are wrong, you are not able to take payments.",
  iconFallbackText: "Warning"
}) }}

{{  govukSummaryList({
    rows: [
      {
        key: {
          text: "Organisational unit ID"
        },
        value: {
          text: currentGatewayAccount.worldpay_3ds_flex.organisational_unit_id if isFlexConfigured else "Not configured",
          classes: "value-organisational-unit-id"
        },
        actions: {
          items: [
            {
              href: routes.yourPsp.flex + "?change=organisationalUnitId",
              text: "Change",
              visuallyHiddenText: "3DS Flex credentials",
              attributes: {
                id: "flex-credentials-change-link"
              }
            }
          ]
        }
      },
      {
        key: {
          text: "Issuer (API ID)"
        },
        value: {
          text: currentGatewayAccount.worldpay_3ds_flex.issuer if isFlexConfigured else "Not configured",
          classes: "value-issuer"
        },
        actions: {
          items: [
            {
              href: routes.yourPsp.flex + "?change=issuer",
              text: "Change",
              visuallyHiddenText: "3DS Flex credentials"
            }
          ]
        }
      },
      {
        key: {
          text: "JWT MAC key (API key)"
        },
        value: {
          text: '●●●●●●●●' if isFlexConfigured else "Not configured",
          classes: "value-jwt-mac-key"
        },
        actions: {
          items: [
            {
              href: routes.yourPsp.flex + "?change=password",
              text: "Change",
              visuallyHiddenText: "3DS Flex credentials"
            }
          ]
        }
      }
    ]
  })
}}
