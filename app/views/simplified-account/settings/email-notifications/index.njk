{% extends "../settings-layout.njk" %}

{% block settingsPageTitle %}
  Email notifications
{% endblock %}

{% block settingsContent %}

  {% if not isServiceAdmin %}
    {{ govukInsetText({
      text: "You donâ€™t have permission to manage settings. Contact your service admin if you would like to manage 3D Secure,
        accepted card types, email notifications, billing address or mask card numbers or security codes for MOTO services.",
      classes: "service-settings-inset-text--grey"
    }) }}
  {% endif %}

  <h1 class="govuk-heading-l">Email notifications</h1>

  {{ govukSummaryList({
    classes: "govuk-!-margin-bottom-9",
    rows: [
      {
        key: {
        text: "Collect email addresses"
      },
        value: {
        text: 'Yes' if (emailCollectionMode === 'MANDATORY') else ('Yes - as an optional field' if (emailCollectionMode === 'OPTIONAL') else 'No')
      },
        actions: {
        items: [
          {
            href: editEmailCollectionHref,
            text: "Change",
            classes: "govuk-link--no-visited-state",
            visuallyHiddenText: "Edit collect email addresses"
          } if isServiceAdmin else {}
        ]
      }
      },
      {
        key: {
          text: "Payment confirmation emails"
        },
        value: {
          text: 'Yes' if (confirmationEmailEnabled and emailCollectionMode !== 'OFF') else
          ('No' if (not confirmationEmailEnabled and emailCollectionMode !== 'OFF') else 'No - email notification off')
        },
        actions: {
        items: [
          {
            href: "#",
            text: "Change",
            classes: "govuk-link--no-visited-state",
            visuallyHiddenText: "Payment confirmation emails settings"
          } if isServiceAdmin else {}
        ]
      }
      },
      {
        key: {
          text: "Refund emails"
        },
        value: {
          text: 'Yes' if (refundEmailEnabled and emailCollectionMode !== 'OFF') else
          ('No' if (not refundEmailEnabled and emailCollectionMode !== 'OFF') else 'No - email notification off')
        },
        actions: {
        items: [
          {
            href: editRefundEmailToggleHref,
            text: "Change",
            classes: "govuk-link--no-visited-state",
            visuallyHiddenText: "Refund emails settings"
          } if (isServiceAdmin and emailCollectionMode !== 'OFF') else {}
        ]
      }
      }
    ]}) }}
{% endblock %}
