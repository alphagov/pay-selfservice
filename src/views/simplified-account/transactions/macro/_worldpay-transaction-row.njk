{% macro worldpayTransactionRow(transaction) %}
  <tr class="transactions-list--row govuk-table__row vertical-align-top">
    <th
      scope="row"
      class="govuk-table__header vertical-align-middle"
      data-gateway-transaction-id="{{ transaction.gatewayTransactionId }}"
    >
      <a
        class="govuk-link govuk-!-font-weight-regular govuk-!-font-size-16 reference govuk-!-display-block"
        id="charge-id-{{ transaction.externalId }}"
        data-charge-id="{{ transaction.externalId }}"
        href="{{ transaction._locals.links.detail }}"
      >
        {{ transaction._locals.formatted.paymentReference }}
      </a>
    </th>
    <td class="govuk-table__cell govuk-!-font-size-16 email vertical-align-middle"
      >{{ transaction._locals.formatted.email }}</td
    >
    <td class="govuk-table__cell amount govuk-!-font-size-16 vertical-align-middle" id="amount">
      {%- if transaction.totalAmount and transaction.corporateCardSurcharge -%}
        {{ transaction._locals.formatted.signedAmount }}
        <span class="govuk-!-display-block govuk-!-font-size-16">(with card fee)</span>
      {%- else -%}
        <span style="white-space: pre">{{ transaction._locals.formatted.amount }}</span>
      {%- endif -%}
    </td>
    <td class="govuk-table__cell govuk-!-font-size-16 brand vertical-align-middle">
      {{ transaction.cardDetails.cardBrand }}
    </td>
    <td class="govuk-table__cell govuk-!-font-size-16 state vertical-align-middle">
      {{ transaction._locals.formatted.status }}
    </td>
    <td
      style="text-align: left"
      class="govuk-table__cell govuk-!-font-size-16 govuk-table__cell--numeric time vertical-align-middle"
    >
      {{ transaction.createdDate | shortDate }} - <br />{{ transaction.createdDate | zonedTime }}
    </td>
  </tr>
{% endmacro %}
