{% extends "simplified-account/services/service-layout.njk" %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/button/macro.njk" import govukButton %}


{% set servicePageTitle %}
  Change the unique part of the website address - {{ paymentLinkTitle }}
{% endset %}
{% block serviceContent %}
  <span class="govuk-caption-l">Create {{ serviceMode }} payment link {% if isWelsh %}(Welsh){% endif %}</span>
  <h1 class="govuk-heading-l">Change the unique part of the website address</h1>

  <form method="post">
    <input id="csrf" name="csrfToken" type="hidden" value="{{ csrf }}" />
    <div id="payment-name-path-hint" class="govuk-hint">
      The website address we automatically generated for this payment link is already taken. You need to choose a new
      one. It is currently <b>/{{ productNamePath | removeIndefiniteArticles | slugify }}</b>. This will not change the
      payment link title.
    </div>

    <div class="payment-link-existing-url">
      <span class="govuk-hint payment-link-existing-url__url-first-part">
        {{ friendlyURL }}/{{ currentService.name | removeIndefiniteArticles | slugify }}/
      </span>

      <div class="govuk-!-width-one-half payment-link-existing-url__url-second-part">
        <label class="govuk-visually-hidden" for="payment-link-path"> Payment link path </label>
        {{
          govukInput({
            id: "payment-link-path",
            name: "paymentLinkPath",
            value: formValues.paymentLinkPath,
            errorMessage: { text: errors.formErrors['paymentLinkPath'] } if errors.formErrors['paymentLinkPath'] else false,
            spellcheck: false,
            type: "text",
            attributes: {
              "autocapitalize": "none",
              "autofocus": "true",
              "data-confirmation-filter": "slugify",
              "aria-describedby": "payment-name-path-hint"
            }
          })
        }}
      </div>
    </div>

    <div class="govuk-button-group">
      {{
        govukButton({
          text: 'Continue',
          classes: 'button'
        })
      }}
      {{
        govukButton({
          text: "Change the title Instead",
          classes: "govuk-button--secondary",
          href: "/service/" + currentService.externalId + "/account/" + accountType + "/payment-links/create"
        })
      }}
    </div>
  </form>
{% endblock %}
