{% extends "layout.njk" %}
{% from "../macro/error-summary.njk" import errorSummary %}

{% block pageTitle %}
  Account credentials - {{currentService.name}} ePDQ - GOV.UK Pay
{% endblock %}

{% block sideNavigation %}
  {% include "includes/side-navigation.njk" %}
{% endblock %}

{% block mainContent %}
<div class="govuk-grid-column-two-thirds">
  {{ errorSummary ({
    errors: errors,
    hrefs: {
      merchantId: "#merchantId",
      username: "#username",
      password: "#password",
      shaInPassphrase: "#shaInPassphrase",
      shaOutPassphrase: "#shaOutPassphrase"
    }
  }) }}

  <h1 class="govuk-heading-l page-title" id="view-title">Your ePDQ credentials</h1>

  <form id="credentials-form" method="post" action="{{ formatAccountPathsFor(routes.account.credentials.index, currentGatewayAccount.external_id, credential.external_id) }}" novalidate>
    <input id="csrf" name="csrfToken" type="hidden" value="{{csrf}}" />

    {{ govukInput({
        label: {
          text: "PSP ID"
        },
        id: "merchantId",
        name: "merchantId",
        classes: "govuk-input--width-20",
        type: "text",
        value: merchantId,
        errorMessage: { text: errors.merchantId } if errors.merchantId else false
      })
    }}

    {{ govukInput({
        label: {
          text: "Username"
        },
        id: "username",
        name: "username",
        classes: "govuk-input--width-20",
        type: "text",
        value: username,
        errorMessage: { text: errors.username } if errors.username else false
      })
    }}

    {{ govukInput({
        label: {
          text: "Password"
        },
        id: "password",
        name: "password",
        classes: "govuk-input--width-20",
        type: "password",
        value: password,
        errorMessage: { text: errors.password } if errors.password else false
      })
    }}

    {{ govukInput({
        label: {
          text: "SHA-IN passphrase"
        },
        id: "shaInPassphrase",
        name: "shaInPassphrase",
        classes: "govuk-input--width-20",
        type: "password",
        value: shaInPassphrase,
        errorMessage: { text: errors.shaInPassphrase } if errors.shaInPassphrase else false
      })
    }}

    {{ govukInput({
        label: {
          text: "SHA-OUT passphrase"
        },
        id: "shaOutPassphrase",
        name: "shaOutPassphrase",
        classes: "govuk-input--width-20",
        type: "password",
        value: shaOutPassphrase,
        errorMessage: { text: errors.shaOutPassphrase } if errors.shaOutPassphrase else false
      })
    }}

    {{
      govukButton({
        text: "Save credentials",
        attributes: {
          id: "submitCredentials"
        }
      })
    }}
  </form>
</div>
{% endblock %}
